<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<groupId>com.ericsson.oss.mediation.cba</groupId>
		<artifactId>sync-node</artifactId>
		<version>1.0.0-SNAPSHOT</version>
	</parent>

	<artifactId>sync-node-test</artifactId>

	<name>${project.artifactId}</name>
	<properties>
		<versant.db.host>10.45.195.138</versant.db.host>
		<versant.db.username>versant</versant.db.username>
		<versant.db.password>shversant</versant.db.password>
		<versant.db.randomName>true</versant.db.randomName>
		<sshd.host>localhost</sshd.host>
		<sshd.port>2122</sshd.port>
		<sshd.username>borusgsn</sshd.username>
		<sshd.password>sgsn123</sshd.password>
		<model.root>${project.build.directory}/deployed-model</model.root>
		<xml.repo>${model.root}/modelRepo.xml</xml.repo>
		<dps.conf.models.jar.name>dps-conf-models-jar-xml.jar</dps.conf.models.jar.name>
		<model.jars.output>${project.build.directory}/model-jars</model.jars.output>
		<path.versant.db>${env.VERSANT_ROOT}</path.versant.db>
		<tunnel.script>tunnel_manager</tunnel.script>
		<!-- The default gateway config file if it's not provided by user. User 
			can override this value by providing "-Dgateway.config.file" when builiding. 
			Example: mvn clean install -Dgateway.config.file=<new_gateway_name.vpn> -->
		<gateway.config.file>atvts290.vpn</gateway.config.file>
		<cba.node.name>cbaverticalslice</cba.node.name>
		<netconf.server.jar.name>sync-node-netconf-server.jar</netconf.server.jar.name>
	</properties>

	<dependencies>
		<dependency>
			<groupId>com.ericsson.oss.itpf.sdk</groupId>
			<artifactId>sdk-core-api</artifactId>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>org.jboss.as</groupId>
			<artifactId>jboss-as-arquillian-container-managed</artifactId>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>org.jboss.arquillian.protocol</groupId>
			<artifactId>arquillian-protocol-servlet</artifactId>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>com.ericsson.oss.itpf.datalayer.dps</groupId>
			<artifactId>dps-api</artifactId>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>org.jboss.arquillian.junit</groupId>
			<artifactId>arquillian-junit-container</artifactId>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>ch.qos.logback</groupId>
			<artifactId>logback-classic</artifactId>
		</dependency>
		<dependency>
			<groupId>org.jboss.shrinkwrap.resolver</groupId>
			<artifactId>shrinkwrap-resolver-impl-maven</artifactId>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>org.jboss.shrinkwrap.descriptors</groupId>
			<artifactId>shrinkwrap-descriptors-impl-base</artifactId>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>org.jboss.shrinkwrap.descriptors</groupId>
			<artifactId>shrinkwrap-descriptors-impl-javaee</artifactId>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>junit</groupId>
			<artifactId>junit</artifactId>
		</dependency>
		<dependency>
			<groupId>com.ericsson.nms.mediation</groupId>
			<artifactId>mediation-service-ear</artifactId>
			<type>ear</type>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>com.ericsson.nms.mediation</groupId>
			<artifactId>mediation-core-ear</artifactId>
			<type>ear</type>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>${group.netconf.handler.ear}</groupId>
			<artifactId>${artifact.netconf.handler.ear}</artifactId>
			<version>${version.netconf.handler}</version>
			<type>ear</type>
		</dependency>
		<dependency>
			<groupId>${group.netconf.connect.handler.ear}</groupId>
			<artifactId>${artifact.netconf.connect.handler.ear}</artifactId>
			<version>${version.netconf.connect.handler}</version>
			<type>ear</type>
		</dependency>
		<dependency>
			<groupId>${group.netconf.disconnect.handler.ear}</groupId>
			<artifactId>${artifact.netconf.disconnect.handler.ear}</artifactId>
			<version>${version.netconf.disconnect.handler}</version>
			<type>ear</type>
		</dependency>
		<dependency>
			<groupId>${group.ossprefix.handler.ear}</groupId>
			<artifactId>${artifact.ossprefix.handler.ear}</artifactId>
			<version>${version.ossprefix.handler.ear}</version>
			<type>ear</type>
		</dependency>
		<dependency>
			<groupId>org.jboss.as.camel</groupId>
			<artifactId>camel-engine-ear</artifactId>
			<type>ear</type>
		</dependency>
		<dependency>
			<groupId>com.ericsson.oss.itpf.common</groupId>
			<artifactId>PlatformIntegrationBridge-ear</artifactId>
			<type>ear</type>
		</dependency>
		<dependency>
			<groupId>com.ericsson.oss.itpf.sdk</groupId>
			<artifactId>service-framework-dist</artifactId>
			<exclusions>
				<exclusion>
					<groupId>org.slf4j</groupId>
					<artifactId>slf4j-api</artifactId>
				</exclusion>
			</exclusions>
		</dependency>
		<!-- Start CPP Reused Handlers  -->
		<dependency>
			<groupId>com.ericsson.nms.mediation.component</groupId>
			<artifactId>ci-association-handler-code-ear</artifactId>
			<type>ear</type>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>${group.eai.handler.ear}</groupId>
			<artifactId>${artifact.eai.handler.ear}</artifactId>
			<type>ear</type>
		</dependency>
		<!-- End CPP Reused Handlers  -->
		<dependency>
			<groupId>${group.netconf.manager}</groupId>
			<artifactId>${artifact.netconf.manager.api}</artifactId>
			<version>${version.netconf.manager.api}</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>javax</groupId>
			<artifactId>javaee-api</artifactId>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>com.ericsson.oss.mediation.cba</groupId>
			<artifactId>sync-node-handler-ear</artifactId>
			<version>${project.version}</version>
			<type>ear</type>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>com.ericsson.nms.mediation.component</groupId>
			<artifactId>inbound-dps-handler-code-ear</artifactId>
			<version>1.0.76</version>
			<type>ear</type>
			<scope>test</scope>
		</dependency>
	</dependencies>

	<profiles>
		<profile>
			<id>non-windows</id>
			<activation>
				<os>
					<family>!windows</family>
				</os>
			</activation>
			<build>
				<testResources>
					<testResource>
						<directory>
							${project.basedir}${file.separator}src${file.separator}test${file.separator}resources
						</directory>
						<filtering>true</filtering>
						<includes>
							<include>server-stop.sh</include>
						</includes>
					</testResource>
				</testResources>
				<plugins>
					<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>exec-maven-plugin</artifactId>
						<executions>
							<execution>
								<id>stop-server</id>
								<phase>post-integration-test</phase>
								<goals>
									<goal>exec</goal>
								</goals>
								<configuration>
									<executable>sh</executable>
									<workingDirectory>${project.build.testOutputDirectory}</workingDirectory>
									<arguments>
										<argument>${project.build.testOutputDirectory}${file.separator}server-stop.sh
										</argument>
									</arguments>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
		<profile>
			<id>windows</id>
			<activation>
				<os>
					<family>windows</family>
				</os>
			</activation>
			<build>
				<testResources>
					<testResource>
						<directory>
							${project.basedir}${file.separator}src${file.separator}test${file.separator}resources
						</directory>
						<targetPath>${project.build.testOutputDirectory}</targetPath>
						<filtering>true</filtering>
						<includes>
							<include>server-stop.bat</include>
						</includes>
					</testResource>
				</testResources>
				<plugins>
					<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>exec-maven-plugin</artifactId>
						<executions>
							<execution>
								<id>stop-server</id>
								<phase>post-integration-test</phase>
								<goals>
									<goal>exec</goal>
								</goals>
								<configuration>
									<executable>cmd</executable>
									<workingDirectory>${project.build.testOutputDirectory}</workingDirectory>
									<arguments>
										<argument>/C</argument>
										<argument>${project.build.testOutputDirectory}${file.separator}server-stop.bat
										</argument>
									</arguments>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
		<profile>
			<id>basic-test</id>
			<activation>
				<property>
					<name>!skipBasicTest</name>
				</property>
			</activation>
			<build>
				<pluginManagement>
					<plugins>
						<plugin>
							<artifactId>maven-surefire-plugin</artifactId>
							<version>2.17</version>
							<configuration>
								<classpathDependencyExcludes>
									<classpathDependencyExclude>javax:javaee-api</classpathDependencyExclude>
								</classpathDependencyExcludes>
							</configuration>
						</plugin>
					</plugins>
				</pluginManagement>
				<testResources>
					<testResource>
						<directory>src/test/resources</directory>
						<filtering>true</filtering>
						<includes>
							<include>*.xml</include>
						</includes>
					</testResource>
				</testResources>
				<plugins>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-dependency-plugin</artifactId>
						<executions>
							<execution>
								<id>download-models</id>
								<phase>generate-test-resources</phase>
								<goals>
									<goal>copy</goal>
								</goals>
								<configuration>
									<artifactItems>
										<artifactItem>
											<groupId>com.ericsson.oss.mediation</groupId>
											<artifactId>mediation-sdk-event-models-xml</artifactId>
											<overWrite>false</overWrite>
											<destFileName>mediation-sdk-event-models-xml.jar</destFileName>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.mediation</groupId>
											<artifactId>mediation-core-api-channel-models-xml</artifactId>
											<destFileName>mediation-core-api-channel-models-xml.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.mediation</groupId>
											<artifactId>mediation-core-api-channel-models-xml</artifactId>
											<version>1.0.18</version>
											<destFileName>mediation-core-api-channel-clustered-models-xml.jar
											</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.mediation</groupId>
											<artifactId>mediation-core-api-event-models-xml</artifactId>
											<destFileName>mediation-core-api-event-models-xml.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.mediation</groupId>
											<artifactId>mediation-core-api-configuration-models-xml</artifactId>
											<destFileName>mediation-core-api-configuration-models-xml.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.mediation</groupId>
											<artifactId>mediation-core-cache-definition-models-xml</artifactId>
											<destFileName>mediation-core-cache-definition-models-xml.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.mediation</groupId>
											<artifactId>mediation-service-configuration-models-xml</artifactId>
											<destFileName>mediation-service-configuration-models-xml.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.itpf.datalayer.dps.model</groupId>
											<artifactId>dps-conf-models-jar</artifactId>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
											<!-- The version of the of the jar is specified via a property in
												the DPS BOM which be cannot read transitively. Therefore the file is renamed
												to strip out the version, so as to prevent problems during the MDT plugin
												section below. -->
											<destFileName>${dps.conf.models.jar.name}</destFileName>
										</artifactItem>

										<artifactItem>
											<groupId>${group.top.ci.model.xml}</groupId>
											<artifactId>${artifact.top.ci.model.xml}</artifactId>
											<version>${version.top.ci.model.xml}</version>
											<destFileName>${artifact.top.ci.model.xml}.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>${group.ne.def.model}</groupId>
											<artifactId>${artifact.ne.def.model}</artifactId>
											<version>${version.ne.def.model}</version>
											<destFileName>${artifact.ne.def.model}.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>

										<artifactItem>
											<groupId>com.ericsson.oss.services.model.onrm</groupId>
											<artifactId>oss-top-model-models</artifactId>
											<destFileName>OssTop-model.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>

										<artifactItem>
											<groupId>com.ericsson.oss.mediation.model</groupId>
											<artifactId>mediation-service-model-models</artifactId>
											<destFileName>mediation-service-model.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>

										<artifactItem>
											<groupId>${group.ossprefix.handler.model}</groupId>
											<artifactId>${artifact.ossprefix.handler.model}</artifactId>
											<version>${version.ossprefix.handler.model}</version>
											<destFileName>${artifact.ossprefix.handler.model}.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>


										<!-- Entity Address Info Models -->

										<!-- TODO - Change with version of EAI when it is available with new model relationship -->
										<artifactItem>
											<groupId>com.ericsson.oss.models.base.mediation.eai</groupId>
											<artifactId>EntityAddressInfoNewModel-model</artifactId>
											<version>LATEST</version>
											<destFileName>EntityAddressInfoModel-model.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>${group.com.ci.model.jar}</groupId>
											<artifactId>${artifact.com.ci.model.jar}</artifactId>
											<version>${version.com.ci.model.jar}</version>
											<destFileName>${artifact.com.ci.model.jar}.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>${group.ecim.config.model.jar}</groupId>
											<artifactId>${artifact.ecim.config.model.jar}</artifactId>
											<version>${version.ecim.config.model.jar}</version>
											<destFileName>${artifact.ecim.config.model.jar}.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>${group.erbs.config.model.jar}</groupId>
											<artifactId>${artifact.erbs.config.model.jar}</artifactId>
											<version>${version.erbs.config.model.jar}</version>
											<destFileName>${artifact.erbs.config.model.jar}.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>${group.ping.flow.model.jar}</groupId>
											<artifactId>${artifact.ping.flow.model.jar}</artifactId>
											<version>${version.ping.flow.model}</version>
											<destFileName>${artifact.ping.flow.model.jar}.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>${group.create.ne.flow.model}</groupId>
											<artifactId>${artifact.create.ne.flow.model}</artifactId>
											<version>${version.create.ne.flow.model}</version>
											<destFileName>${artifact.create.ne.flow.model}.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.nms.mediation.component</groupId>
											<artifactId>inbound-dps-handler-model-jar</artifactId>
											<destFileName>inbound-dps-handler-model-jar.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.itpf.common</groupId>
											<artifactId>PlatformIntegrationBridgeModel-model</artifactId>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
											<destFileName>PlatformIntegrationBridgeModel-model.jar</destFileName>
										</artifactItem>
										<!-- Start - CPP reused handlers Models -->
										<artifactItem>
											<groupId>com.ericsson.nms.mediation.component</groupId>
											<artifactId>ci-association-handler-model-jar</artifactId>
											<destFileName>ci-association-handler-model-jar.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>

										<artifactItem>
											<groupId>${group.eai.handler.model.jar}</groupId>
											<artifactId>${artifact.eai.handler.model.jar}</artifactId>
											<destFileName>${artifact.eai.handler.model.jar}.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<!-- End - CPP reused handlers -->

										<!-- netype extension models starts -->
										<artifactItem>
											<groupId>${group.neType.extn.model.jar}</groupId>
											<artifactId>${artifact.neType.msrbsv1.model.jar}</artifactId>
											<version>${version.neType.msrbsv1.model.jar}</version>
											<destFileName>msrbsv1-netype-model-jar.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>${group.neType.extn.model.jar}</groupId>
											<artifactId>${artifact.neType.msrbsv2.model.jar}</artifactId>
											<version>${version.neType.msrbsv2.model.jar}</version>
											<destFileName>msrbsv2-netype-model-jar.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>${group.neType.extn.model.jar}</groupId>
											<artifactId>${artifact.neType.sgsn-mme.model.jar}</artifactId>
											<version>${version.neType.sgsn-mme.model.jar}</version>
											<destFileName>sgsn-mme-netype-model-jar.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>${group.neType.extn.model.jar}</groupId>
											<artifactId>${artifact.neType.tcu.model.jar}</artifactId>
											<version>${version.neType.tcu.model.jar}</version>
											<destFileName>tcu-netype-model-jar.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>

										<!-- END: netype extension models  -->
										<!-- START : platorm type extension -->
										<artifactItem>
											<groupId>${group.platform.type.model}</groupId>
											<artifactId>${artifact.platform.type.model.cba}</artifactId>
											<version>${version.platform.type.model}</version>
											<destFileName>${artifact.platform.type.model.cba}.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>${group.platform.type.model}</groupId>
											<artifactId>${artifact.platform.type.model.sgsn}</artifactId>
											<version>${version.platform.type.model}</version>
											<destFileName>${artifact.platform.type.model.sgsn}.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.mediation.cba</groupId>
											<artifactId>sync-node-model</artifactId>
											<version>${project.version}</version>
											<destFileName>sync-node-model.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.mediation.model.nrm.function</groupId>
											<artifactId>sgsn-mme-node-model-14a-jar</artifactId>
											<version>1.0.15</version>
											<destFileName>sgsn-mme-node-model-14a-jar.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.services.model.ned</groupId>
											<artifactId>cm-function-model-models</artifactId>
											<version>1.0.10</version>
											<destFileName>cm-function-model-models.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.models.cm.mediation.flows</groupId>
											<artifactId>sync-node-flow-model</artifactId>
											<version>1.0.40</version>
											<destFileName>sync-node-flow-model.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.mediation.cm.events</groupId>
											<artifactId>sync-node-event-model-jar</artifactId>
											<version>1.0.25</version>
											<destFileName>sync-node-event-model-jar.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.mediation.cba.models.handlers.netconf</groupId>
											<artifactId>cba-netconf-disconnect-handler-model-jar</artifactId>
											<version>LATEST</version>
											<destFileName>cba-netconf-disconnect-handler-model-jar.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.mediation.cba.models.handlers.netconf</groupId>
											<artifactId>cba-netconf-connect-handler-model-jar</artifactId>
											<version>LATEST</version>
											<destFileName>cba-netconf-connect-handler-model-jar.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.mediation.cba.models</groupId>
											<artifactId>cba-configuration-model-xml</artifactId>
											<version>LATEST</version>
											<destFileName>cba-configuration-model-xml.jar</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${model.jars.output}</outputDirectory>
										</artifactItem>
										<!-- END : platorm type extension -->
										<artifactItem>
											<groupId>com.ericsson.oss.mediation.cba</groupId>
											<artifactId>sync-node-netconf-server</artifactId>
											<version>${project.version}</version>
											<destFileName>${netconf.server.jar.name}</destFileName>
											<overWrite>false</overWrite>
											<outputDirectory>${project.build.directory}</outputDirectory>
										</artifactItem>
									</artifactItems>
								</configuration>
							</execution>
							<execution>
								<id>unpack</id>
								<phase>generate-test-resources</phase>
								<goals>
									<goal>unpack</goal>
								</goals>

								<configuration>
									<artifactItems>
										<artifactItem>
											<groupId>org.jboss.as</groupId>
											<artifactId>jboss-as-dist</artifactId>
											<type>zip</type>
											<overWrite>false</overWrite>
											<outputDirectory>target/</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.itpf.sdk</groupId>
											<artifactId>service-framework-bundle</artifactId>
											<type>tar.gz</type>
											<overWrite>false</overWrite>
											<outputDirectory>${jboss.home.module.dir}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.itpf.datalayer.dps</groupId>
											<artifactId>dps-api-module</artifactId>
											<classifier>package</classifier>
											<type>zip</type>
											<overWrite>false</overWrite>
											<outputDirectory>${jboss.home.module.dir}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.itpf.datalayer.dps</groupId>
											<artifactId>data-access-delegate-api-module</artifactId>
											<classifier>package</classifier>
											<type>zip</type>
											<overWrite>false</overWrite>
											<outputDirectory>${jboss.home.module.dir}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.itpf.datalayer.dps</groupId>
											<artifactId>dps-remote-api-module</artifactId>
											<classifier>package</classifier>
											<type>zip</type>
											<overWrite>false</overWrite>
											<outputDirectory>${jboss.home.module.dir}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.versant</groupId>
											<artifactId>versant-jpa-jboss-module</artifactId>
											<type>zip</type>
											<overWrite>false</overWrite>
											<outputDirectory>${jboss.home.module.dir}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.nms.mediation</groupId>
											<artifactId>contrib-module</artifactId>
											<type>zip</type>
											<overWrite>true</overWrite>
											<outputDirectory>${jboss.home.module.dir}</outputDirectory>
										</artifactItem>
										<!-- Model service API -->
										<artifactItem>
											<groupId>com.ericsson.oss.itpf.modeling</groupId>
											<artifactId>model-service-api-module</artifactId>
											<type>zip</type>
											<classifier>package</classifier>
											<overWrite>true</overWrite>
											<outputDirectory>${jboss.home.module.dir}</outputDirectory>
										</artifactItem>
										<!-- Model service IMPL -->
										<artifactItem>
											<groupId>com.ericsson.oss.itpf.modeling</groupId>
											<artifactId>model-service-module</artifactId>
											<type>zip</type>
											<classifier>package</classifier>
											<overWrite>true</overWrite>
											<outputDirectory>${jboss.home.module.dir}</outputDirectory>
										</artifactItem>
										<!-- Camel Subsystem -->
										<artifactItem>
											<groupId>org.jboss.as.camel</groupId>
											<artifactId>subsystem</artifactId>
											<type>zip</type>
											<overWrite>true</overWrite>
											<outputDirectory>${jboss.home.module.dir}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.nms.mediation</groupId>
											<artifactId>camel-module</artifactId>
											<type>zip</type>
											<overWrite>true</overWrite>
											<outputDirectory>${jboss.home.module.dir}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>org.jboss.as.camel</groupId>
											<artifactId>camel-jboss-module</artifactId>
											<type>zip</type>
											<overWrite>true</overWrite>
											<outputDirectory>${jboss.home.module.dir}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.nms.mediation</groupId>
											<artifactId>core-mediation-engine-api-module</artifactId>
											<classifier>engine-api-module</classifier>
											<type>zip</type>
											<outputDirectory>${jboss.home.module.dir}</outputDirectory>
										</artifactItem>
										<artifactItem>
											<groupId>com.ericsson.oss.mediation.util</groupId>
											<artifactId>cba-netconf-module</artifactId>
											<classifier>package</classifier>
											<version>LATEST</version>
											<type>zip</type>
											<overWrite>false</overWrite>
											<outputDirectory>${jboss.home.module.dir}</outputDirectory>
										</artifactItem>
									</artifactItems>
								</configuration>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<artifactId>maven-resources-plugin</artifactId>
						<executions>
							<execution>
								<id>copy-resources-standalone-files</id>
								<phase>process-test-resources</phase>
								<goals>
									<goal>copy-resources</goal>
								</goals>
								<configuration>
									<overwrite>true</overwrite>
									<outputDirectory>${jboss.home}/standalone/configuration/</outputDirectory>
									<resources>
										<resource>
											<directory>src/test/resources/jboss_settings/standalone/configuration/
											</directory>
											<includes>
												<include>*.*</include>
											</includes>
											<filtering>false</filtering>
										</resource>
									</resources>
								</configuration>
							</execution>
						</executions>
					</plugin>
					<plugin> <!-- Create Versant DB -->
						<groupId>com.ericsson.nms.mediation.cba</groupId>
						<artifactId>cba-tools-versant-maven</artifactId>
						<version>1.0.0</version>
						<executions>
							<execution>
								<id>create-versant-db</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>create-versant-db</goal>
								</goals>
								<configuration>
									<username>${versant.db.username}</username>
									<password>${versant.db.password}</password>
									<host>${versant.db.host}</host>
									<randomName>${versant.db.randomName}</randomName>
									<correctedDbNameProperty>versant.db.name</correctedDbNameProperty>
								</configuration>
							</execution>
							<execution>
								<id>remove-versant-db</id>
								<phase>post-integration-test</phase>
								<goals>
									<goal>remove-versant-db</goal>
								</goals>
								<configuration>
									<username>${versant.db.username}</username>
									<password>${versant.db.password}</password>
									<host>${versant.db.host}</host>
									<name>${versant.db.name}</name>
								</configuration>
							</execution>
						</executions>
					</plugin>

					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-antrun-plugin</artifactId>
						<executions>
							<execution>
								<id>run-netconf-server</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>run</goal>
								</goals>
								<configuration>
									<target>
										<exec executable="java"
											  dir="${project.build.directory}"
											  spawn="true">
											<arg value="-jar"/>
											<arg value="${project.build.directory}${file.separator}${netconf.server.jar.name}"/>
											<arg value="--port"/>
											<arg value="${sshd.port}"/>
											<arg value="-u"/>
											<arg value="${sshd.username}"/>
											<arg value="-p"/>
											<arg value="${sshd.password}"/>
											<arg value="-l"/>
											<arg value="DEBUG"/>
											<arg value="-c"/>
											<arg value="com.ericsson.oss.mediation.netconf.FilterSupportListener"/>
										</exec>
									</target>
								</configuration>
							</execution>
						</executions>
						<dependencies>
							<dependency>
								<groupId>com.ericsson.oss.mediation.cba</groupId>
								<artifactId>sync-node-netconf-server</artifactId>
								<version>${project.version}</version>
							</dependency>
						</dependencies>
					</plugin>

					<plugin>
						<groupId>com.ericsson.oss.itpf.modeling</groupId>
						<artifactId>model-deployment-jar</artifactId>
						<configuration>
							<jarFiles>
								<param>${model.jars.output}/${artifact.top.ci.model.xml}.jar</param>
								<param>${model.jars.output}/${artifact.com.ci.model.jar}.jar</param>
								<param>${model.jars.output}/${artifact.ne.def.model}.jar</param>
								<param>${model.jars.output}/OssTop-model.jar</param>
								<param>${model.jars.output}/${artifact.ossprefix.handler.model}.jar</param>
								<param>${model.jars.output}/${artifact.ecim.config.model.jar}.jar</param>
								<param>${model.jars.output}/${artifact.erbs.config.model.jar}.jar</param>
								<param>${model.jars.output}/EntityAddressInfoModel-model.jar</param>

								<param>${model.jars.output}/${artifact.ping.flow.model.jar}.jar</param>
								<param>${model.jars.output}/${artifact.create.ne.flow.model}.jar</param>

								<!-- <param>${model.jars.output}/${artifact.ping.handler.model.jar}.jar</param> -->
								<param>${model.jars.output}/${artifact.eai.handler.model.jar}.jar</param>
								<param>${model.jars.output}/mediation-sdk-event-models-xml.jar</param>
								<param>${model.jars.output}/mediation-core-api-channel-models-xml.jar</param>
								<param>${model.jars.output}/mediation-core-api-channel-clustered-models-xml.jar</param>
								<param>${model.jars.output}/mediation-core-api-event-models-xml.jar</param>
								<param>${model.jars.output}/mediation-core-api-configuration-models-xml.jar</param>
								<param>${model.jars.output}/mediation-core-cache-definition-models-xml.jar</param>
								<param>${model.jars.output}/mediation-service-configuration-models-xml.jar</param>
								<param>${model.jars.output}/mediation-service-model.jar</param>
								<param>${model.jars.output}/PlatformIntegrationBridgeModel-model.jar</param>

								<param>${model.jars.output}/${dps.conf.models.jar.name}</param>
								<param>${model.jars.output}/inbound-dps-handler-model-jar.jar</param>

								<param>${model.jars.output}/ci-association-handler-model-jar.jar</param>

								<!-- netype extension models starts -->
								<param>${model.jars.output}/msrbsv1-netype-model-jar.jar</param>
								<param>${model.jars.output}/msrbsv2-netype-model-jar.jar</param>
								<param>${model.jars.output}/sgsn-mme-netype-model-jar.jar</param>
								<param>${model.jars.output}/tcu-netype-model-jar.jar</param>
								<!-- END: netype extension models starts -->
								<!-- START : platorm type extension -->
								<param>${model.jars.output}/${artifact.platform.type.model.cba}.jar</param>
								<param>${model.jars.output}/${artifact.platform.type.model.sgsn}.jar</param>
								<param>${model.jars.output}/sync-node-model.jar</param>
								<param>${model.jars.output}/sgsn-mme-node-model-14a-jar.jar</param>
								<param>${model.jars.output}/cm-function-model-models.jar</param>
								<param>${model.jars.output}/sync-node-flow-model.jar</param>
								<param>${model.jars.output}/sync-node-event-model-jar.jar</param>
								<param>${model.jars.output}/cba-netconf-disconnect-handler-model-jar.jar</param>
								<param>${model.jars.output}/cba-netconf-connect-handler-model-jar.jar</param>
								<param>${model.jars.output}/cba-configuration-model-xml.jar</param>
								<!-- END : platorm type extension -->
							</jarFiles>
							<modelRoot>${model.root}</modelRoot>
							<xmlRepo>${xml.repo}</xmlRepo>
						</configuration>
						<executions>
							<execution>
								<id>deploy-model</id>
								<phase>process-test-resources</phase>
								<goals>
									<goal>model-deploy</goal>
								</goals>
							</execution>
						</executions>
					</plugin>

					<plugin>    <!-- Start of DPS Plugin here -->
						<groupId>com.ericsson.oss.itpf.datalayer.dps</groupId>
						<artifactId>dps-maven-plugin</artifactId>
						<configuration>
							<workDir>${project.build.directory}/dps_work</workDir>
							<outputDir>${project.build.directory}/jboss-eap-6.1/standalone/deployments</outputDir>
							<modelDir>${model.root}</modelDir>
							<modelRepoXmlPath>${xml.repo}</modelRepoXmlPath>
							<jBossDir>${project.build.directory}/jboss-eap-6.1</jBossDir>
							<dbHostName>${versant.db.host}</dbHostName>
							<dbName>${versant.db.name}</dbName>
							<schemaUpdate>true</schemaUpdate>
							<useMockDelegate>false</useMockDelegate>
							<versantDir>${path.versant.db}</versantDir>
						</configuration>
						<executions>
							<execution>
								<id>run-dps-maven-plugin</id>
								<phase>pre-integration-test</phase>
								<goals>
									<goal>build-dps</goal>
								</goals>
							</execution>
						</executions>
					</plugin>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-failsafe-plugin</artifactId>
						<configuration>
							<threadCount>5</threadCount>
							<systemPropertyVariables>
								<arquillian.launch>jboss_managed</arquillian.launch>
								<cba.node.name>${cba.node.name}</cba.node.name>
							</systemPropertyVariables>
						</configuration>
						<executions>
							<execution>
								<id>integration-test</id>
								<goals>
									<goal>integration-test</goal>
									<goal>verify</goal>
								</goals>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
	</profiles>

</project>
